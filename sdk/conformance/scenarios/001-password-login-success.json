{
  "name": "Password login 200 -> me(200)",
  "setup": {
    "env": { "TENANT_ID": "{{NONMFA_TENANT_ID}}", "EMAIL": "{{NONMFA_EMAIL}}", "PASSWORD": "{{NONMFA_PASSWORD}}" }
  },
  "requiresEnv": ["TENANT_ID", "EMAIL", "PASSWORD"],
  "steps": [
    {
      "request": {
        "method": "POST",
        "path": "/v1/auth/password/login",
        "headers": { "content-type": "application/json" },
        "body": {
          "tenant_id": "{{TENANT_ID}}",
          "email": "{{EMAIL}}",
          "password": "{{PASSWORD}}"
        }
      },
      "expect": {
        "status": 200,
        "bodyContains": { "access_token": {}, "refresh_token": {} }
      },
      "store": {
        "ACCESS_TOKEN": "access_token",
        "REFRESH_TOKEN": "refresh_token"
      }
    },
    {
      "request": {
        "method": "GET",
        "path": "/v1/auth/me",
        "headers": { "authorization": "Bearer {{ACCESS_TOKEN}}" }
      },
      "expect": { "status": 200 }
    }
  ]
}
